<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Собрать ланч – Вкусные бизнес-ланчи</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="menu-style.css">
    <link rel="stylesheet" href="form-style.css">
    <link rel="stylesheet" href="checkout-panel.css">
</head>
<body>
    <header>
        <h1>Собрать ланч</h1>
        <nav>
            <a href="index.html">Главная</a>
            <a href="menu.html" id="active">Собрать ланч</a>
            <a href="order.html">Оформить заказ</a>
            <a href="orders.html">Заказы</a>
            <a href="index.html#contacts">Контакты</a>
        </nav>
    </header>


    <main>
        <!-- Блок с комбо-предложениями ПЕРЕД выбором блюд -->
        <section class="combo-section">
            <h2>Доступные для заказа комбо</h2>
            <div class="combo-grid">
                <!-- Комбо 1 -->
                <div class="combo-item">
                    <div class="combo-dish">
                        <img src="images/combo/soup-icon.png" alt="Суп">
                        <span>Суп</span>
                    </div>
                    <div class="combo-dish">
                        <img src="images/combo/main-icon.png" alt="Главное блюдо">
                        <span>Главное блюдо</span>
                    </div>
                    <div class="combo-dish">
                        <img src="images/combo/salad-icon.png" alt="Салат">
                        <span>Салат</span>
                    </div>
                    <div class="combo-dish">
                        <img src="images/combo/drink-icon.png" alt="Напиток">
                        <span>Напиток</span>
                    </div>
                </div>


                <!-- Комбо 2 -->
                <div class="combo-item">
                    <div class="combo-dish">
                        <img src="images/combo/soup-icon.png" alt="Суп">
                        <span>Суп</span>
                    </div>
                    <div class="combo-dish">
                        <img src="images/combo/main-icon.png" alt="Главное блюдо">
                        <span>Главное блюдо</span>
                    </div>
                    <div class="combo-dish">
                        <img src="images/combo/drink-icon.png" alt="Напиток">
                        <span>Напиток</span>
                    </div>
                </div>


                <!-- Комbo 3 -->
                <div class="combo-item">
                    <div class="combo-dish">
                        <img src="images/combo/soup-icon.png" alt="Суп">
                        <span>Суп</span>
                    </div>
                    <div class="combo-dish">
                        <img src="images/combo/salad-icon.png" alt="Салат">
                        <span>Салат</span>
                    </div>
                    <div class="combo-dish">
                        <img src="images/combo/drink-icon.png" alt="Напиток">
                        <span>Напиток</span>
                    </div>
                </div>


                <!-- Комбо 4 -->
                <div class="combo-item">
                    <div class="combo-dish">
                        <img src="images/combo/main-icon.png" alt="Главное блюдо">
                        <span>Главное блюдо</span>
                    </div>
                    <div class="combo-dish">
                        <img src="images/combo/salad-icon.png" alt="Салат">
                        <span>Салат</span>
                    </div>
                    <div class="combo-dish">
                        <img src="images/combo/drink-icon.png" alt="Напиток">
                        <span>Напиток</span>
                    </div>
                </div>


                <!-- Комбо 5 -->
                <div class="combo-item">
                    <div class="combo-dish">
                        <img src="images/combo/main-icon.png" alt="Главное блюдо">
                        <span>Главное блюдо</span>
                    </div>
                    <div class="combo-dish">
                        <img src="images/combo/drink-icon.png" alt="Напиток">
                        <span>Напиток</span>
                    </div>
                </div>
            </div>


            <!-- Блок с десертами -->
            <div class="dessert-info">
                <div class="combo-dish">
                    <img src="images/combo/dessert-icon.png" alt="Десерт">
                    <span>Десерт</span>
                </div>
                <p class="dessert-note">*(Можно добавить к любому заказу)</p>
            </div>
        </section>


        <!-- Секция супов -->
        <section class="menu-section">
            <h2>Выберите суп</h2>
            <div class="filters" data-category="soup">
                <button class="filter-btn active" data-kind="all">Все</button>
                <button class="filter-btn" data-kind="fish">рыбный</button>
                <button class="filter-btn" data-kind="meat">мясной</button>
                <button class="filter-btn" data-kind="veg">вегетарианский</button>
            </div>
            <div class="dishes-grid">
            </div>
        </section>


        <!-- Секция главных блюд -->
        <section class="menu-section">
            <h2>Выберите главное блюдо</h2>
            <div class="filters" data-category="main">
                <button class="filter-btn active" data-kind="all">Все</button>
                <button class="filter-btn" data-kind="fish">рыбное</button>
                <button class="filter-btn" data-kind="meat">мясное</button>
                <button class="filter-btn" data-kind="veg">вегетарианское</button>
            </div>
            <div class="dishes-grid">
            </div>
        </section>


        <!-- Секция салатов и стартеров -->
        <section class="menu-section">
            <h2>Выберите салат или стартер</h2>
            <div class="filters" data-category="salad">
                <button class="filter-btn active" data-kind="all">Все</button>
                <button class="filter-btn" data-kind="fish">рыбный</button>
                <button class="filter-btn" data-kind="meat">мясной</button>
                <button class="filter-btn" data-kind="veg">вегетарианский</button>
            </div>
            <div class="dishes-grid">
            </div>
        </section>


        <!-- Секция напитков -->
        <section class="menu-section">
            <h2>Выберите напиток</h2>
            <div class="filters" data-category="drink">
                <button class="filter-btn active" data-kind="all">Все</button>
                <button class="filter-btn" data-kind="cold">холодный</button>
                <button class="filter-btn" data-kind="hot">горячий</button>
            </div>
            <div class="dishes-grid">
            </div>
        </section>


        <!-- Секция десертов -->
        <section class="menu-section">
            <h2>Выберите десерт</h2>
            <div class="filters" data-category="dessert">
                <button class="filter-btn active" data-kind="all">Все</button>
                <button class="filter-btn" data-kind="small">маленькая порция</button>
                <button class="filter-btn" data-kind="medium">средняя порция</button>
                <button class="filter-btn" data-kind="large">большая порция</button>
            </div>
            <div class="dishes-grid">
            </div>
        </section>

        <!-- ПАНЕЛЬ ОФОРМЛЕНИЯ ЗАКАЗА (Lab 8) -->
        <div id="checkout-panel" class="checkout-panel" style="display: none;">
            <div class="checkout-content">
                <div class="checkout-info">
                    <span class="checkout-label">Стоимость заказа:</span>
                    <span id="checkout-total" class="checkout-price">0₽</span>
                </div>
                <a href="order.html" id="checkout-link" class="checkout-link">Перейти к оформлению</a>
            </div>
        </div>
    </main>


    <footer id="contacts">
        <h2>Контакты</h2>
        <p>г. Москва</p>
        <p>Телефон: <a href="tel:+79000000000">+7 (900) 000-00-00</a></p>
        <p>Email: <a href="mailto:order@lunch.ru">order@lunch.ru</a></p>
    </footer>


    <script src="api-loader.js"></script>
    <script src="display-dishes.js"></script>
    <script src="order-manager.js"></script>
    <script src="filter-dishes.js"></script>
    <script src="notifications.js"></script>


    <script>
        // Основная функция инициализации приложения
        async function initializeApp() {
            console.log('Начало инициализации приложения...');
            
            await loadDishes();
            console.log('Данные загружены, доступно блюд:', dishes.length);
            
            loadOrderFromStorage();
            
            if (typeof displayDishes === 'function') {
                displayDishes();
            }
            
            if (typeof initEventListeners === 'function') {
                setTimeout(initEventListeners, 100);
            }
            
            if (typeof updateOrderSummary === 'function') {
                updateOrderSummary();
            }
            
            if (typeof initFilters === 'function') {
                setTimeout(initFilters, 100);
            }
            
            const dishCards = document.querySelectorAll('.dish-card');
            dishCards.forEach(card => {
                const keyword = card.getAttribute('data-dish');
                const category = card.getAttribute('data-category');
                if (selectedDishes[category]?.keyword === keyword) {
                    card.classList.add('selected');
                }
            });
            
            console.log('Приложение полностью инициализировано');
        }


        // Запускаем инициализацию когда DOM готов
        document.addEventListener('DOMContentLoaded', function() {
            console.log('DOM загружен, начинаем инициализацию...');
            initializeApp();
        });
    </script>
    <div id="notifications-container" class="notifications-container"></div>
    <script src="notifications.js"></script>

</body>
</html>

